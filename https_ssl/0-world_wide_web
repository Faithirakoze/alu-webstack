#!/usr/bin/env bash
# Script to display DNS record info for subdomains

# Function to query DNS info
lookup_subdomain() {
    local domain=$1
    local subdomain=$2
    result=$(dig "${subdomain}.${domain}" +short)

    if [ -n "$result" ]; then
        record_type="A"
        echo "The subdomain ${subdomain} is a ${record_type} record and points to ${result}"
    else
        echo "No record found for ${subdomain}.${domain}"
    fi
}

# --- Main script logic ---
domain=$1
subdomain=$2

# Check if domain was provided
if [ -z "$domain" ]; then
    echo "Usage: $0 <domain> [subdomain]"
    exit 1
fi

if [ -n "$subdomain" ]; then
    # If subdomain provided, only lookup that one
    lookup_subdomain "$domain" "$subdomain"
else
    # Otherwise lookup all in required order
    for s in www lb-01 web-01 web-02; do
        lookup_subdomain "$domain" "$s"
    done
fi

